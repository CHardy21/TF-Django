{% load static %}
{% now 'U' as timestamp %}

<!DOCTYPE html>
<html lang="es-arn">
  <head>
    <title>
      {% block title %}
        Tecno blog
      {% endblock %}
    </title>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <!-- Bootstrap CSS v5.2.1 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

    <link rel="stylesheet" href="{% static 'css/style.no-min.css' %}?v={{ timestamp }}" />
    <link rel="stylesheet" href="{% static 'css/my-style.css' %}?v={{ timestamp }}" />

    {% block extra_css %}

    {% endblock %}
  </head>

  <body>
    {% load static %}
    <div class="top-user-bar fixed-top bg-dark text-white py-1 px-3 shadow-sm" style="z-index: 1050;">
      <div class="container-fluid d-flex justify-content-end align-items-center gap-3">
        {% if user.is_authenticated %}
          <a href="{% url 'user:profile' %}" class="d-flex align-items-center text-white text-decoration-none">
            {% if user.avatar %}
              <img src="{{ user.avatar.url }}" alt="Avatar" width="25px" height="25px" />
            {% else %}
              <img src="/static/images/default_avatar.png" alt="Avatar por defecto" width="25px" height="25px" />
            {% endif %}
            <span class="ms-2">Hola {{ user.username }}</span>
          </a>

          {% if user.role == 'admin' %}
            <a href="/admin/" class="btn btn-sm btn-primary" title="Panel de Control"><i class="fa fa-tachometer-alt"></i></a>
          {% elif user.role == 'colaborador' %}
            <a href="/dashboard" class="btn btn-sm btn-primary" title="Panel de Control"><i class="fa fa-tachometer-alt"></i></a>
          {% endif %}

          <form method="post" action="{% url 'user:logout' %}" class="d-inline">
            {% csrf_token %}
            <button type="submit" class="btn btn-sm btn-danger" title="Cerrar sesiÃ³n"><i class="fas fa-sign-out-alt"></i></button>
          </form>
        {% else %}
          <a href="{% url 'user:login' %}" class="btn btn-sm btn-outline-light login">Login</a>
          <a href="{% url 'user:register' %}" class="btn btn-sm btn-outline-none registro-hover">Registro</a>
        {% endif %}
      </div>
    </div>

    <div class="wrapper">
      {% include 'header.html' %}
      <main style="height: auto; padding: 1em;">
        {% block content %}


        {% endblock %}
      </main>

      {% include 'footer.html' %}

      <!-- Bootstrap JavaScript Libraries -->
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    </div>
    <script>
  document.addEventListener("DOMContentLoaded", function () {
    const toastElList = [].slice.call(document.querySelectorAll(".toast"));
    toastElList.forEach(function (toastEl) {
      const toast = new bootstrap.Toast(toastEl);
      toast.show();
    });
  });
</script>

  </body>
</html>
